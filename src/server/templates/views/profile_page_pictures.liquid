{% assign userFollowing = user.following | join: "," %}

<div class="profile-pictures-wrapper">
  <div class="profile-pictures-container">
    <div class='profile-cover-picture w-full'>
      <img src='{{userProfile.coverPic}}' alt='Cover' class='w-full' />
    </div>
    
    <div class='profile-pictures flex justify-end items-end relative px-3'>
      <div class="profile-picture-container rounded-full border-2 border-white w-40 h-40 absolute -top-20 left-4">
        <img src="{{userProfile.profilePic}}" alt="User profile picture" class='w-full rounded-full border-2 hover:cursor-pointer hover:bg-opacity-90' />
      </div>

      <div class='profile-pictures-buttons'>
        <div class='flex justify-items-end space-x-5 mt-5'>

        {% if userProfile._id == user._id %}

          <button data-profile-id="{{userProfile._id}}" class='edit-profile-button cursor-pointer text-base font-semibold rounded-xl outline-none px-3 py-2 focus:outline-white focus:shadow-none focus:ring-0'>
            <span class='comment-button__label pointer-events-none'>Edit profile</span>
          </button>

        {% else %}

          <button data-profile-id="{{userProfile._id}}" class='message-user-button cursor-pointer border-2 border-[#1DA1F2] white-text-onHover-button text-lg font-normal rounded-xl bg-white outline-none px-3 py-2 hover:bg-[#1DA1F2]'>
            <span class='pointer-events-none text-[#1DA1F2]'>
              <i class="fas fa-envelope"></i>
            </span>
          </button>

          {% if userFollowing contains userProfile._id %}
            
            <button data-profile-id="{{userProfile._id}}" class='following-unfollowing unfollow-button cursor-pointer text-base font-semibold rounded-xl outline-none px-3 py-2 focus:outline-white focus:shadow-none focus:ring-0'>
              <span class='follow-button__label pointer-events-none ring-0  '>Following</span>
              <i class="follow-button__spinner hidden fas fa-spinner fa-pulse"></i>
            </button>

          {% else %} 
  
            <button data-profile-id="{{userProfile._id}}" class='following-unfollowing follow-button cursor-pointer text-base rounded-xl outline-none px-3 py-2 font-semibold ring-0 focus:outline-white focus:shadow-none focus:ring-0 '>
              <span class='follow-button__label pointer-events-none'>Follow</span>
              <i class="follow-button__spinner hidden fas fa-spinner fa-pulse"></i>
            </button>

          {% endif %}
        {% endif %}
        </div>
      </div>
    </div>

  </div>
</div>