{% if user._id == message.sender._id %}
      
    {% comment %} {% if message.prevMessage.sender != message.sender  %} {% endcomment %}
    {% if message.prevMessage.sender != message.sender and chat.users.size > 2 %}
      <div class='message-container flex w-full justify-end px-4 my-2'>
          <div class='max-w-[55%] pr-2'>
            <span class='sender-username text-brand-blue font-semibold'>
              {{message.sender.firstName}} {{message.sender.lastName}}
            </span>
          </div>
      </div>
    {% endif %}
    <div class='message-container sent flex w-full px-4 mb-1'>
      <div class='max-w-[55%]'>
        <span class='inline-block px-4 py-2 
        {% if message.prevMessage.sender != message.sender %}
          rounded-tr-2xl
        {% endif %}
         {% if message.nextMessage.sender != message.sender %}
          rounded-br-2xl
        {% endif %}        
        rounded-tl-2xl rounded-bl-2xl'>{{message.content}}</span>
      </div>
    </div>
{% else %}
    {% if message.prevMessage.sender != message.sender and chat.users.size > 2 %}
    {% comment %} {% if message.prevMessage.sender != message.sender  %} {% endcomment %}
      <div class='message-container flex w-full justify-start px-4 my-2'>
          <div class='max-w-[55%] pl-2'>
            <span class='sender-username text-brand-purple font-semibold'>
              {{message.sender.firstName}} {{message.sender.lastName}}
            </span>
          </div>
      </div>
    {% endif %}

    <div class='message-container received flex w-full px-4 mb-1'>
      <div class='max-w-[55%] flex justify-start'>
        <span class='inline-block px-4 py-2 
        {% if message.prevMessage.sender != message.sender %}
          rounded-tl-2xl
        {% endif %}
         {% if message.nextMessage.sender != message.sender %}
          rounded-bl-2xl
        {% endif %}
        rounded-tr-2xl rounded-br-2xl'>{{message.content}}</span>
      </div>
    </div>
{% endif %}